---
title: Vue.jsのスタイルガイドまとめ
permalink: vue-style-guide
description: 
created_at: 2020-04-06
tags: Vue
---

このページはVue.jsスタイルガイドの要約と、分かりにくい部分に対し深堀りしました。記事の対象範囲は、単一ファイルコンポーネント（.vue）に対してです。  
[スタイルガイド — Vue.js](https://jp.vuejs.org/v2/style-guide/index.html)  

# ルールカテゴリ

| 優先度 | 内容 |
| ---- | ---- |
| A:必須 | エラー防止 |
| B:強く推奨 | 読みやすさ向上 |
| C:推奨 | 一貫性の確保 |
| D:使用注意 | 潜在的な不具合の回避 |

# A:必須

## 複数単語コンポーネント名
コンポーネント名は常に複数単語にします。全てのHTML要素は1単語のため、HTML要素との衝突を防止します。  

**悪い例**  
```
export default {
  name: 'Todo',
  // ...
}
```

**良い例**  
```
export default {
  name: 'TodoItem',
  // ...
}
```

## コンポーネントのデータ
コンポーネントのdataは、オブジェクトを返す関数でなければなりません。  

**悪い例**  
```
export default {
  data: {
    foo: 'bar'
  }
}
```

**良い例**  
```
export default {
  data () {
    return {
      foo: 'bar'
    }
  }
}
```

**補足**  
dataの値がオブジェクトの時、コンポーネントの全てのインスタンスで共有されるため、他のインスタンスのdataの値を書き換えてしまいます。

## プロパティの定義
プロパティの定義はできる限り詳しく書きます。

**悪い例**  
```
props: ['status']
```

**良い例**  
```
props: {
  status: String
}
```

**補足**  
上記の例の場合、statusにString以外の型が渡されると、ディベロッパーツールのConsoleに警告を出して知らせてくれます。  

以下のようにプロパティの定義を複数設定することもできます。
```
props: {
  status: {
    type: String,
    default: '',
    required: true
  }
}
```

更にvalidatorを設定することができます。次の例では、配列statusの各文字数が10文字以下か否かのチェックをしています。everyメソッドを使うことで全ての値が10文字以上だった場合、trueを返すようにしています。
```
props: {
  status: {
    type: Array,
    required: true,
    validator (arrayValue) {
      return arrayValue.every( v => v.length <= 10 )
    }
  }
}
```

## キー付き v-for
keyは仮想DOMの差分から実際のDOMに反映させるときに、最小限の変更するために使われます。差分算出のため、描画のパフォーマンスの向上に繋がります。  
参考：[API — Vue.js](https://jp.vuejs.org/v2/api/#key)  


**悪い例**  
```
<ul>
  <li v-for="todo in todos">
    {{ todo.text }}
  </li>
</ul>
```

**良い例**  
```
<ul>
  <li
    v-for="todo in todos"
    :key="todo.id"
  >
    {{ todo.text }}
  </li>
</ul>
```

**補足**  
DOMの内容が単純な場合や、要素の追加や削除あるいは順序変更がない場合に限り、keyを使わなくても問題はないようです。keyを使わない場合は、配列インデックスが使われます。  
参考：[リストレンダリング — Vue.js](https://jp.vuejs.org/v2/guide/list.html#状態の維持)  

v-forで第2引数を指定すると配列インデックスを受け取る事ができますが、アニメーションなどのユーザー操作に関わるDOMの変更においては、keyの削除を行った場合にkeyが振り直されindexが変わるため、予期せぬ不具合を起こすようです。  
参考：[Vue.js: v-forで項目インデックスをkey属性にしていいのか](https://qiita.com/FumioNonaka/items/d1d9c9335116426a8316)  



※中途半端になったため、また改めて更新します。

