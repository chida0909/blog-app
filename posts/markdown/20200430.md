---
title: ドメイン駆動設計ざっくりメモ
permalink: domain-driven-design-understanding
description: 
created_at: 2020-04-30
tags: DDD
---

ドメイン駆動設計(DDD)というものが何なのか調べているうちに[ドメイン駆動設計(DDD) カテゴリーの記事一覧 - little hands' lab](https://little-hands.hatenablog.com/archive/category/ドメイン駆動設計%28DDD%29)というブログを見つけました。
  
個人的にはとても読みやすく、書籍も購入しました。
[ドメイン駆動設計 モデリング/実装ガイド](https://little-hands.booth.pm/items/1835632)
  
その中から自分用に簡単に内容をまとめてみました。
  
# 用語一覧
- ドメイン駆動設計（DDD / Domain-driven design）
ソフトウェアの開発手法のひとつです。モデリングによってソフトウェアの価値を高めることを目指す開発手法のこと。

- ドメイン
ソフトウェア化する対象

- ドメインモデル（モデル）
問題解決のために、物事の特定の側面を抽象化したもの

- モデリング
モデルを作成する活動のこと

- ドメインエキスパート
ドメインに詳しい人 = 普段その業務を行っている人など

- ユビキタス言語
開発者だけでなく、ビジネス側の人とも同じ言葉を使うことはもちろん、「会話でも、ドキュメントでも、コードでも」ということを意味します。場所によって違う言葉が使われると、言い換えや変換が行われ意味の損失や認識ずれがどうしても発生しますが、その言葉の変換を極力なくすことを目指します。

- 境界づけられたコンテキスト
あるモデルを、同じ意味で使い続ける範囲を定義するものです。そうすることにより、 モデルを適切な粒度に分解し、精度を上げることを目指します。

- UML
Unified Modeling Language（統一モデリング言語）の略語で、オブジェクト指向開発に一貫して用いられるモデリング手法です。

- ユースケース図
「ユーザの要求に対するシステムの振る舞いを定義する図」です。アクターとしてユーザーの種類を定義 (棒人間のアイコンで記載) し、ユースケースとして「〇〇を××する」という形式でシステムの振る舞いを定義(丸い吹き出しで記載)します。

- アクター
システムを操作、利用する人を表します。

- ドメインモデル図
ユーザの視点で見た、システムに登場する「もの」の概念(ドメインクラス)を集めた図のことです。プロジェクトの用語集をクラス図風に表現した図ということにもなります。

# モデルとは

モデルとは問題解決のために、物事の特定の側面を抽象化したものです。

例えばソフトウェアを構築するために「履歴書」のモデルを作成する場合、履歴書に必要な「名前」「経歴」「志望理由」などを挙げていきます。その中には「筆圧」「履歴書のメーカー」と言った要素も含まれます。ただし「筆圧」「履歴書のメーカー」はソフトウェアの構築には不要のため、取捨選択をしなければいけません。この取捨選択のプロセスが抽象化で、その成果物がモデルです。

良いモデル（問題を解決できるモデル）を作るには、次の2つの方法があります。
- ドメインエキスパートと会話する
- 運用して得られた発見をモデルに還元する

運用して得られた発見をモデルに還元するとは「最初からモデルは完成せず、徐々に改善して行くもの」という考えがDDDにおいて重要とされているからです。この2つを使い良いモデルを作成していきます。

# モデリングから実装まで
DDDに着手して迷うのは、モデリングの方法やアウトプットの形式です。その中でもユースケース図と、ドメインモデル図で作成する方法があります。

## ユースケース図

![usecase](../images/ddd_usecase.png)
  
ドメインモデル図を作成する前に、先にユースケース図を作成します。先にユースケース図を作成する目的は、ユースケースを具体化しないとどのようなモデルを作成すれば良いか判断できないからです。作業者として自分のタスクを管理したいのか、管理者として複数のタスクを管理したいのか。それによってタスクのドメインモデルは違うものになります。

一度定義したユースケース図の中で、ドメインモデル図作成のスコープを定義します。

## ドメインモデル図

![usecase](../images/ddd_usecase.png)
  
ドメインモデル図を書くルール
- オブジェクトの代表的な属性を書くが、メソッドまで書かなくてよい
- 「ルール/成約 (ドメイン知識)」を吹き出しに書き出す
- オブジェクト同士の関連を示す
- 多重度を定義する
- 集約の範囲を定義する
- 理解を促進するために、具体例などを書いても良い

以上のルール基づき、ドメインモデルを作成していきます。


